const Web3 = require('web3')
const path = require('path')


const web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:5001')) // change here the port number of the Fab3 running

const account = web3.eth.accounts.create() // created just to call deploy function

console.log("-- ACCOUNTS --")
web3.eth.getAccounts(console.log) //print the eth address generated by the runned Fab3

const myContract = new web3.eth.Contract(require(path.join(process.cwd(), "abi2.json")))

myContract.deploy({
    data: '608060405234801561001057600080fd5b506123bf806100206000396000f30060806040526004361061011d576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806320ede3a21461012257806323de5fba1461018b57806326324eff146101b6578063337ce7eb146102be578063429b62e5146102e95780636280e78d146103e3578063629b36941461040e578063638c626c146104395780636da11ad2146104d4578063775dd988146104ff578063845894d414610568578063a80b141a14610665578063a96f0e5a146106ba578063ba700427146106e5578063c1d2f79414610710578063c26f47e61461073d578063c404c35914610788578063cb4c38421461080d578063da15d49014610838578063daf484e0146108d3578063ee7448221461096e575b600080fd5b34801561012e57600080fd5b50610189600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610999565b005b34801561019757600080fd5b506101a0610c6c565b6040518082815260200191505060405180910390f35b3480156101c257600080fd5b506101f7600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610c76565b604051808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018060200185151515158152602001848152602001838152602001828103825286818151815260200191508051906020019080838360005b8381101561027f578082015181840152602081019050610264565b50505050905090810190601f1680156102ac5780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390f35b3480156102ca57600080fd5b506102d3610d71565b6040518082815260200191505060405180910390f35b3480156102f557600080fd5b5061032a600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610d7b565b604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018060200183151515158152602001828103825284818151815260200191508051906020019080838360005b838110156103a657808201518184015260208101905061038b565b50505050905090810190601f1680156103d35780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b3480156103ef57600080fd5b506103f8610e6a565b6040518082815260200191505060405180910390f35b34801561041a57600080fd5b50610423610e70565b6040518082815260200191505060405180910390f35b34801561044557600080fd5b5061046460048036038101908080359060200190929190505050610e7a565b604051808873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018781526020018681526020018581526020018481526020018315151515815260200182815260200197505050505050505060405180910390f35b3480156104e057600080fd5b506104e9610ff4565b6040518082815260200191505060405180910390f35b34801561050b57600080fd5b50610566600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290505050610ffe565b005b34801561057457600080fd5b506105a9600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506112f2565b604051808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001848152602001838152602001828103825285818151815260200191508051906020019080838360005b8381101561062757808201518184015260208101905061060c565b50505050905090810190601f1680156106545780820380516001836020036101000a031916815260200191505b509550505050505060405180910390f35b34801561067157600080fd5b506106b860048036038101908080359060200190929190803590602001909291908035906020019092919080359060200190929190803590602001909291905050506115b6565b005b3480156106c657600080fd5b506106cf6119c5565b6040518082815260200191505060405180910390f35b3480156106f157600080fd5b506106fa6119cf565b6040518082815260200191505060405180910390f35b34801561071c57600080fd5b5061073b600480360381019080803590602001909291905050506119d5565b005b34801561074957600080fd5b5061078660048036038101908080359060200190929190803590602001909291908035906020019092919080359060200190929190505050611c99565b005b34801561079457600080fd5b5061079d611e1d565b604051808873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018781526020018681526020018581526020018481526020018315151515815260200182815260200197505050505050505060405180910390f35b34801561081957600080fd5b50610822611f96565b6040518082815260200191505060405180910390f35b34801561084457600080fd5b5061086360048036038101908080359060200190929190505050611f9c565b604051808873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018781526020018681526020018581526020018481526020018315151515815260200182815260200197505050505050505060405180910390f35b3480156108df57600080fd5b506108fe60048036038101908080359060200190929190505050612116565b604051808873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018781526020018681526020018581526020018481526020018315151515815260200182815260200197505050505050505060405180910390f35b34801561097a57600080fd5b5061098361228e565b6040518082815260200191505060405180910390f35b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff16151515610a83576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260268152602001807f4163636f756e7420616c7265616479207265676973746572656420617320507281526020017f6f6475636572000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff16151515610b6e576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260238152602001807f4163636f756e7420616c7265616479207265676973746572656420617320416481526020017f6d696e000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6060604051908101604052803373ffffffffffffffffffffffffffffffffffffffff16815260200182815260200160011515815250600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019080519060200190610c45929190612298565b5060408201518160020160006101000a81548160ff02191690831515021790555090505050565b6000600254905090565b60006020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610d485780601f10610d1d57610100808354040283529160200191610d48565b820191906000526020600020905b815481529060010190602001808311610d2b57829003601f168201915b5050505050908060020160009054906101000a900460ff16908060030154908060040154905085565b6000600554905090565b60016020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806001018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610e4d5780601f10610e2257610100808354040283529160200191610e4d565b820191906000526020600020905b815481529060010190602001808311610e3057829003601f168201915b5050505050908060020160009054906101000a900460ff16905083565b600b5481565b6000600b54905090565b6000806000806000806000600b5488108015610e9957506000600b5410155b1515610f0d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600b8152602001807f57726f6e6720696e64657800000000000000000000000000000000000000000081525060200191505060405180910390fd5b600a600089815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600a60008a815260200190815260200160002060010154600a60008b815260200190815260200160002060020154600a60008c815260200190815260200160002060030154600a60008d815260200190815260200160002060040154600a60008e815260200190815260200160002060050160009054906101000a900460ff16600a60008f8152602001908152602001600020600601549650965096509650965096509650919395979092949650565b6000600754905090565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff161515156110e8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260268152602001807f4163636f756e7420616c7265616479207265676973746572656420617320507281526020017f6f6475636572000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff161515156111d3576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602d8152602001807f4163636f756e7420616c7265616479207265676973746572656420617320526581526020017f636c6f746865732041646d696e0000000000000000000000000000000000000081525060400191505060405180910390fd5b60a0604051908101604052803373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020016001151581526020016000815260200160008152506000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010190805190602001906112b7929190612298565b5060408201518160020160006101000a81548160ff021916908315150217905550606082015181600301556080820151816004015590505050565b60006060600080846000808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff1615156113e3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260228152602001807f4163636f756e74206e6f7420726567697374657265642061732050726f64756381526020017f657200000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b6000808773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166000808873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001016000808973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600301546000808a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060040154828054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561159f5780601f106115745761010080835404028352916020019161159f565b820191906000526020600020905b81548152906001019060200180831161158257829003601f168201915b505050505092509450945094509450509193509193565b6115be612318565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff16151561161857600080fd5b81600354101515156116b8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260348152602001807f4e6f7420656e6f7567687420706f696e747320616363756d756c61746564206981526020017f6e206f6c64206d6174657269616c20626f78657300000000000000000000000081525060400191505060405180910390fd5b60e0604051908101604052803373ffffffffffffffffffffffffffffffffffffffff168152602001878152602001868152602001858152602001848152602001600115158152602001838152509050806000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060050160008060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030154815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001015560408201518160020155606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff02191690831515021790555060c082015181600601559050506000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060030160008154809291906001019190505550816000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206004016000828254019250508190555080600a6000600b54815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001015560408201518160020155606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff02191690831515021790555060c08201518160060155905050600b6000815480929190600101919050555081600360008282540392505081905550600560008154809291906001019190505550505050505050565b6000600954905090565b60075481565b60008060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff161515611a3157600080fd5b600754600954101515611aac576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f4e6f206d6f72652070656e64696e67207265717565737400000000000000000081525060200191505060405180910390fd5b60066000600954815260200190815260200160002060050160009054906101000a900460ff16151515611b47576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260168152602001807f52657175657374206a757374206576616c75617465640000000000000000000081525060200191505060405180910390fd5b600660006009548152602001908152602001600020905060018160050160006101000a81548160ff021916908315150217905550818160060181905550806008600060095481526020019081526020016000206000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600182015481600101556002820154816002015560038201548160030155600482015481600401556005820160009054906101000a900460ff168160050160006101000a81548160ff0219169083151502179055506006820154816006015590505060096000815480929190600101919050555081600360008282540192505081905550816002600082825401925050819055505050565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff161515611cf457600080fd5b60e0604051908101604052803373ffffffffffffffffffffffffffffffffffffffff168152602001858152602001848152602001838152602001828152602001600015158152602001600081525060066000600754815260200190815260200160002060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001015560408201518160020155606082015181600301556080820151816004015560a08201518160050160006101000a81548160ff02191690831515021790555060c0820151816006015590505060046000815480929190600101919050555060076000815480929190600101919050555050505050565b6000806000806000806000600754600954101515611ea3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260178152602001807f4e6f204d6f72652050656e64696e67205265717565737400000000000000000081525060200191505060405180910390fd5b60066000600954815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166006600060095481526020019081526020016000206001015460066000600954815260200190815260200160002060020154600660006009548152602001908152602001600020600301546006600060095481526020019081526020016000206004015460066000600954815260200190815260200160002060050160009054906101000a900460ff1660066000600954815260200190815260200160002060060154965096509650965096509650965090919293949596565b60095481565b600080600080600080600060095488108015611fbb57506000600b5410155b151561202f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600b8152602001807f57726f6e6720696e64657800000000000000000000000000000000000000000081525060200191505060405180910390fd5b6008600089815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600860008a815260200190815260200160002060010154600860008b815260200190815260200160002060020154600860008c815260200190815260200160002060030154600860008d815260200190815260200160002060040154600860008e815260200190815260200160002060050160009054906101000a900460ff16600860008f8152602001908152602001600020600601549650965096509650965096509650919395979092949650565b600080600080600080600060075488108015612133575060008810155b15156121a7576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600b8152602001807f57726f6e6720696e64657800000000000000000000000000000000000000000081525060200191505060405180910390fd5b6006600089815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600660008a815260200190815260200160002060010154600660008b815260200190815260200160002060020154600660008c815260200190815260200160002060030154600660008d815260200190815260200160002060040154600660008e815260200190815260200160002060050160009054906101000a900460ff16600660008f8152602001908152602001600020600601549650965096509650965096509650919395979092949650565b6000600454905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106122d957805160ff1916838001178555612307565b82800160010185558215612307579182015b828111156123065782518255916020019190600101906122eb565b5b509050612314919061236e565b5090565b60e060405190810160405280600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600081526020016000815260200160008152602001600015158152602001600081525090565b61239091905b8082111561238c576000816000905550600101612374565b5090565b905600a165627a7a7230582078b3f2d094f6a366352ec03ab72dcd0d33c6a8e8103692cf73823f1be15ab4510029'
}).send({
    from: account.address,
    gas: 1500000,
    gasPrice: "30000000000000",
    value: 0
}).on('error', (error) => {
    console.log(error)
}).then((newContractInstance) => {
    console.log(newContractInstance.options.address)
})
